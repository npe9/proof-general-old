-*- outline -*-  

* Main Changes for Proof General 4.0 from 3.7.X

** Generic changes

*** XEmacs is no longer supported; PG only works with GNU Emacs 22.2+

*** Font-lock based Unicode Tokens mode replaces X-Symbol
    Unicode Tokens has been significantly improved since PG 3.7.1.
    For best results, Emacs 23 is recommended.

*** Document-centred mechanisms added:
    - output retained for script buffer popups
    - background colouring for locked region can be disabled
    - auto raise of prover output buffers can be disabled
    Depending on input language and interaction output, this
    may enable a "document centred" way of working, when output
    buffers can be ignored and hidden. 
    Use full annotation to keep output when several steps are taken.

*** Improved prevention of Undo in locked region
    proof-allow-undo-in-read-only: now defaults to nil

*** Simplified version of comint now used for proof shell
    To improve efficiency, a cut-down version of comint is now used.
    This means that the editing, history and decoration inside the
    proof shell (*coq*, *isabelle*, etc) are impoverished
    compared with PG 3.X.

*** New user configuration options
    proof-auto-raise-buffers  (set to nil for manual control)
    proof-full-decoration     (add full decoration to input)

*** Removed user configuration options
    proof-toolbar-use-button-enablers  (now always used)
    proof-output-fontify-enable        (now always enabled)

*** Altered prover configuration settings (internal)

    urgent message matching is now anchored; configurations for
    `proof-shell-clear-response-regexp', etc, must match
    strings which begin with `proof-shell-eager-annotation-start'.

    pg-insert-output-as-comment-fn: removed (use p-s-last-output)
    proof-shell-wakeup-char: removed (special chars deprecated)
    proof-shell-prompt-pattern: removed (was only for shell UI)
    proof-shell-abort-goal-regexp: removed (ordinary response)
    pg-use-specials-for-fontify: removed
    proof-shell-strip-output-markup: required for cut-and-paste
    proof-electric-terminator-noterminator: allows non-insert of terminator


*** Primary distribution formats changed
    The RPM and zip file formats have been removed.
    We are very grateful to third-party packagers for Debian and Fedora
    for distributing packaged versions of PG.

** Isabelle/Isar changes

*** Electric terminator works without inserting terminator

*** Line numbers reported during script management

*** Sync problems with bad input prevented by command wrapping

*** Isabelle Settings now organised in sub-menus


** Coq changes

*** Holes mode can be turned on/off

