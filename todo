-*- mode:outline -*-
* This is a list of things which need doing in the generic interface
====================================================================

o Implement proof-find-previous-terminator and bind it to C-c C-a

o Fixing up errors caused by pbp-generated commands.

o pbp code doesn't quite accord with the tech report; in particular it
  decodes annotations eagerly. Lazily would be faster, and it's what
  the tech report claims
  --- djs: probably not much faster, actually.

o It would be nice to have a version ported to emacs19 (or
  20). Unfortunately, it's currently impossible to port the pbp code,
  since emacs19 doesn't properly handle highlighting of nested
  overlays. The bulk of the stuff dependent on which version of emacs
  is running has been moved to proof-dependencies.el, but there are
  doubtless differences in font-locking and menu code which will
  require some work.

o file handling could be more robust; perhaps one should always cd to
  the directory corresponding to the script buffer (currently only
  done for the buffer which starts up the proof system)

o LEGO and Coq modes overwrite each other.

o We need to go over to piped communication rather than ptys to fix
  the (Solaris) ^G bug. In this circumstance there's a bug in the
  eager annotation code

o Outline-mode does not work due to read-only restrictions of
  protected region

* Here are things to be done to Lego mode
=========================================

o undo support for LEGO needs to consider Discharge; perhaps unrol to
  the beginning of the module?

o LEGO mode might incorporate changes to Coq mode menu, in particular
  making help refer to the info file.

o Sometimes e.g., ~tms/lego/imperative/recursion/Prepare_vc.l,
  annotations are recorded in the object file. This needs to be
  changed in the SML code.

o Mechanism to save object file (does this apply to Coq as well?)

o Equiv, Next,... aren't handled properly, because LEGO does not
  refresh the proof state. Perhaps it would be easiest to get LEGO to
  output more information in proof script mode

o due to bugs in the LEGO system, object files may fail.
  Script-management needs to be aware of this problem.

* Here are things to be done to Coq mode
========================================

o Restart if going back to beginning of proof.

o C-c u inside a Section should reset the whole section, then redo defns

o There's a bug so the goal buffer isn't displaying everything that
  happens.

o Sections and files are handled incorrectly.

o Update documentation to include C-c C-s.
 
o Lifted nested lemmas respond incorrectly to C-c u: Coq gets sent the
  correct command if I undo up to the lower lemma, but the buffer
  undoes to the upper lemma.  I.e., if I start Lemma x, then prove
  Lemma y, then finish x, and undo lemma x, then lemma y gets undone
  in the buffer as well.
